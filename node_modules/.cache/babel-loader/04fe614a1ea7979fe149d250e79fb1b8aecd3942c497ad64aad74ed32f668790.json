{"ast":null,"code":"import _regeneratorRuntime from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import{requestAPI}from'../services/requestAPI';import logo from'../images/logo trivia.png';import trybe from'../images/ícone trybe.png';import{login}from'../redux/actions/playerAction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={disabled:true,player:'',email:''};_this.handleChange=function(_ref){var _ref$target=_ref.target,name=_ref$target.name,value=_ref$target.value;_this.setState(_defineProperty({},name,value),_this.validationButton);};_this.validationButton=function(){var _this$state=_this.state,player=_this$state.player,email=_this$state.email;_this.setState({disabled:!(player&&email)});};_this.clickButton=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _this$props,history,dispatch,_this$state2,email,player,api;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_this$props=_this.props,history=_this$props.history,dispatch=_this$props.dispatch;_this$state2=_this.state,email=_this$state2.email,player=_this$state2.player;_context.next=5;return requestAPI();case 5:api=_context.sent;localStorage.setItem('token',api.token);dispatch(login({gravatarEmail:email,name:player}));history.push('/game');case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}();return _this;}_createClass(Login,[{key:\"render\",value:function render(){var disabled=this.state.disabled;var history=this.props.history;return/*#__PURE__*/_jsxs(\"form\",{className:\"form-login\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"trivia-logo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"div-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter your name here\",\"data-testid\":\"input-player-name\",name:\"player\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Enter your email here\",\"data-testid\":\"input-gravatar-email\",name:\"email\",onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"button-play\",type:\"submit\",\"data-testid\":\"btn-play\",onClick:this.clickButton,disabled:disabled,children:\"Play\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button-config\",type:\"button\",\"data-testid\":\"btn-settings\",onClick:function onClick(){return history.push('/ranking');},children:\"Ranking\"})]}),/*#__PURE__*/_jsx(\"img\",{src:trybe,alt:\"Logo da Trybe\"})]});}}]);return Login;}(Component);export default connect()(Login);","map":{"version":3,"names":["React","Component","connect","requestAPI","logo","trybe","login","Login","state","disabled","player","email","handleChange","target","name","value","setState","validationButton","clickButton","e","preventDefault","props","history","dispatch","api","localStorage","setItem","token","gravatarEmail","push"],"sources":["/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/src/pages/Login.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport { requestAPI } from '../services/requestAPI';\nimport logo from '../images/logo trivia.png';\nimport trybe from '../images/ícone trybe.png';\nimport { login } from '../redux/actions/playerAction';\n\nclass Login extends Component {\n  state = {\n    disabled: true,\n    player: '',\n    email: '',\n  };\n\n  handleChange = ({ target: { name, value } }) => {\n    this.setState(\n      {\n        [name]: value,\n      },\n      this.validationButton,\n    );\n  };\n\n  validationButton = () => {\n    const { player, email } = this.state;\n    this.setState({\n      disabled: !(player && email),\n    });\n  };\n\n  clickButton = async (e) => {\n    e.preventDefault();\n    const { history, dispatch } = this.props;\n    const { email, player } = this.state;\n    const api = await requestAPI();\n    localStorage.setItem('token', api.token);\n    dispatch(login({\n      gravatarEmail: email,\n      name: player }));\n    history.push('/game');\n  };\n\n  render() {\n    const { disabled } = this.state;\n    const { history } = this.props;\n    return (\n      <form className=\"form-login\">\n        <img src={ logo } alt=\"logo\" className=\"trivia-logo\" />\n        <div className=\"div-form\">\n          <input\n            type=\"text\"\n            placeholder=\"Enter your name here\"\n            data-testid=\"input-player-name\"\n            name=\"player\"\n            onChange={ this.handleChange }\n          />\n          <input\n            type=\"email\"\n            placeholder=\"Enter your email here\"\n            data-testid=\"input-gravatar-email\"\n            name=\"email\"\n            onChange={ this.handleChange }\n          />\n          <button\n            className=\"button-play\"\n            type=\"submit\"\n            data-testid=\"btn-play\"\n            onClick={ this.clickButton }\n            disabled={ disabled }\n          >\n            Play\n          </button>\n          <button\n            className=\"button-config\"\n            type=\"button\"\n            data-testid=\"btn-settings\"\n            onClick={ () => history.push('/ranking') }\n          >\n            Ranking\n          </button>\n        </div>\n        <img src={ trybe } alt=\"Logo da Trybe\" />\n      </form>\n    );\n  }\n}\n\nLogin.propTypes = {\n  dispatch: PropTypes.func,\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }),\n}.isRequired;\n\nexport default connect()(Login);\n"],"mappings":"w8BAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CAExC,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,UAAU,KAAQ,wBAAwB,CACnD,MAAOC,KAAI,KAAM,2BAA2B,CAC5C,MAAOC,MAAK,KAAM,2BAA2B,CAC7C,OAASC,KAAK,KAAQ,+BAA+B,CAAC,2FAEhDC,MAAK,uTACTC,KAAK,CAAG,CACNC,QAAQ,CAAE,IAAI,CACdC,MAAM,CAAE,EAAE,CACVC,KAAK,CAAE,EACT,CAAC,OAEDC,YAAY,CAAG,cAAiC,sBAA9BC,MAAM,CAAIC,IAAI,aAAJA,IAAI,CAAEC,KAAK,aAALA,KAAK,CACrC,MAAKC,QAAQ,oBAERF,IAAI,CAAGC,KAAK,EAEf,MAAKE,gBAAgB,CACtB,CACH,CAAC,OAEDA,gBAAgB,CAAG,UAAM,CACvB,gBAA0B,MAAKT,KAAK,CAA5BE,MAAM,aAANA,MAAM,CAAEC,KAAK,aAALA,KAAK,CACrB,MAAKK,QAAQ,CAAC,CACZP,QAAQ,CAAE,EAAEC,MAAM,EAAIC,KAAK,CAC7B,CAAC,CAAC,CACJ,CAAC,OAEDO,WAAW,6FAAG,iBAAOC,CAAC,kLACpBA,CAAC,CAACC,cAAc,EAAE,CAAC,YACW,MAAKC,KAAK,CAAhCC,OAAO,aAAPA,OAAO,CAAEC,QAAQ,aAARA,QAAQ,cACC,MAAKf,KAAK,CAA5BG,KAAK,cAALA,KAAK,CAAED,MAAM,cAANA,MAAM,uBACHP,WAAU,EAAE,QAAxBqB,GAAG,eACTC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,GAAG,CAACG,KAAK,CAAC,CACxCJ,QAAQ,CAACjB,KAAK,CAAC,CACbsB,aAAa,CAAEjB,KAAK,CACpBG,IAAI,CAAEJ,MAAO,CAAC,CAAC,CAAC,CAClBY,OAAO,CAACO,IAAI,CAAC,OAAO,CAAC,CAAC,qDACvB,sHAED,iBAAS,CACP,GAAQpB,SAAQ,CAAK,IAAI,CAACD,KAAK,CAAvBC,QAAQ,CAChB,GAAQa,QAAO,CAAK,IAAI,CAACD,KAAK,CAAtBC,OAAO,CACf,mBACE,cAAM,SAAS,CAAC,YAAY,wBAC1B,YAAK,GAAG,CAAGlB,IAAM,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,EAAG,cACvD,aAAK,SAAS,CAAC,UAAU,wBACvB,cACE,IAAI,CAAC,MAAM,CACX,WAAW,CAAC,sBAAsB,CAClC,cAAY,mBAAmB,CAC/B,IAAI,CAAC,QAAQ,CACb,QAAQ,CAAG,IAAI,CAACQ,YAAc,EAC9B,cACF,cACE,IAAI,CAAC,OAAO,CACZ,WAAW,CAAC,uBAAuB,CACnC,cAAY,sBAAsB,CAClC,IAAI,CAAC,OAAO,CACZ,QAAQ,CAAG,IAAI,CAACA,YAAc,EAC9B,cACF,eACE,SAAS,CAAC,aAAa,CACvB,IAAI,CAAC,QAAQ,CACb,cAAY,UAAU,CACtB,OAAO,CAAG,IAAI,CAACM,WAAa,CAC5B,QAAQ,CAAGT,QAAU,UACtB,MAED,EAAS,cACT,eACE,SAAS,CAAC,eAAe,CACzB,IAAI,CAAC,QAAQ,CACb,cAAY,cAAc,CAC1B,OAAO,CAAG,yBAAMa,QAAO,CAACO,IAAI,CAAC,UAAU,CAAC,EAAE,UAC3C,SAED,EAAS,GACL,cACN,YAAK,GAAG,CAAGxB,KAAO,CAAC,GAAG,CAAC,eAAe,EAAG,GACpC,CAEX,CAAC,mBA7EiBJ,SAAS,EAuF7B,cAAeC,QAAO,EAAE,CAACK,KAAK,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}
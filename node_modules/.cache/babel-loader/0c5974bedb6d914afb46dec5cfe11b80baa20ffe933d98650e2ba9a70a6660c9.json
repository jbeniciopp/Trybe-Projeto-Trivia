{"ast":null,"code":"import _toConsumableArray from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _classCallCheck from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{connect}from'react-redux';import Header from'../components/Header';import{login}from'../redux/actions/playerAction';import{resetScore}from'../redux/actions/resetState';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Feedback=/*#__PURE__*/function(_Component){_inherits(Feedback,_Component);var _super=_createSuper(Feedback);function Feedback(){var _this;_classCallCheck(this,Feedback);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleClick=function(){var _this$props$player=_this.props.player,name=_this$props$player.name,score=_this$props$player.score,gravatarEmail=_this$props$player.gravatarEmail;var prevStorage=JSON.parse(localStorage.getItem('ranking')||'[]');localStorage.setItem('ranking',JSON.stringify([].concat(_toConsumableArray(prevStorage),[{name:name,score:score,gravatarEmail:gravatarEmail}])));var dispatch=_this.props.dispatch;dispatch(resetScore());var history=_this.props.history;history.push('/ranking');};return _this;}_createClass(Feedback,[{key:\"render\",value:function render(){var _this$props=this.props,_this$props$player2=_this$props.player,score=_this$props$player2.score,assertions=_this$props$player2.assertions,history=_this$props.history,dispatch=_this$props.dispatch;var tres=3;// console.log(this.props);\nreturn/*#__PURE__*/_jsxs(\"div\",{\"data-testid\":\"feedback-text\",className:\"feedback-div\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"feedback\",children:[/*#__PURE__*/_jsx(\"h2\",{\"data-testid\":\"feedback-text\",children:assertions<tres?'Could be better...':'Well Done!'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Seu score \\xE9:\",' ',/*#__PURE__*/_jsx(\"span\",{\"data-testid\":\"feedback-total-score\",children:score})]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\"Voc\\xEA acertou:\",' ',/*#__PURE__*/_jsx(\"span\",{\"data-testid\":\"feedback-total-question\",children:assertions})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",\"data-testid\":\"btn-play-again\",onClick:function onClick(){// console.log('clicou');\ndispatch(login({name:'',assertions:0,score:0,gravatarEmail:''}));history.push('/');},children:\"Play Again\"}),/*#__PURE__*/_jsx(\"button\",{\"data-testid\":\"btn-ranking\",onClick:this.handleClick,children:\"Ranking\"})]})]});}}]);return Feedback;}(Component);var mapStateToProps=function mapStateToProps(_ref){var player=_ref.player;return{player:player};};export default connect(mapStateToProps)(Feedback);","map":{"version":3,"names":["React","Component","connect","Header","login","resetScore","Feedback","handleClick","props","player","name","score","gravatarEmail","prevStorage","JSON","parse","localStorage","getItem","setItem","stringify","dispatch","history","push","assertions","tres","mapStateToProps"],"sources":["/home/joaob/Projetos-Portifolio/Trybe-Projeto-Trivia/src/pages/Feedback.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport Header from '../components/Header';\nimport { login } from '../redux/actions/playerAction';\nimport { resetScore } from '../redux/actions/resetState';\n\nclass Feedback extends Component {\n  handleClick = () => {\n    const { player: { name, score, gravatarEmail } } = this.props;\n    const prevStorage = JSON.parse(localStorage.getItem('ranking') || '[]');\n    localStorage.setItem(\n      'ranking',\n      JSON.stringify([...prevStorage, { name, score, gravatarEmail }]),\n    );\n    const { dispatch } = this.props;\n    dispatch(resetScore());\n    const { history } = this.props;\n    history.push('/ranking');\n  };\n\n  render() {\n    const { player: { score, assertions }, history, dispatch } = this.props;\n    const tres = 3;\n    // console.log(this.props);\n    return (\n      <div data-testid=\"feedback-text\" className=\"feedback-div\">\n        <Header />\n        <div className=\"feedback\">\n          <h2 data-testid=\"feedback-text\">\n            { assertions < tres ? 'Could be better...' : 'Well Done!' }\n          </h2>\n          <div>\n            <h2>\n              Seu score é:\n              {' '}\n              <span data-testid=\"feedback-total-score\">{score}</span>\n            </h2>\n            <h2>\n              Você acertou:\n              {' '}\n              <span data-testid=\"feedback-total-question\">{assertions}</span>\n            </h2>\n          </div>\n          <button\n            type=\"button\"\n            data-testid=\"btn-play-again\"\n            onClick={ () => {\n            // console.log('clicou');\n              dispatch(login({\n                name: '',\n                assertions: 0,\n                score: 0,\n                gravatarEmail: '',\n              }));\n              history.push('/');\n            } }\n          >\n            Play Again\n          </button>\n          <button\n            data-testid=\"btn-ranking\"\n            onClick={ this.handleClick }\n          >\n            Ranking\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nFeedback.propTypes = {\n  user: PropTypes.shape({\n    assertions: PropTypes.number,\n  }),\n}.isRequired;\n\nconst mapStateToProps = ({ player }) => ({\n  player,\n});\n\nexport default connect(mapStateToProps)(Feedback);\n"],"mappings":"0qBACA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,OAAO,KAAQ,aAAa,CACrC,MAAOC,OAAM,KAAM,sBAAsB,CACzC,OAASC,KAAK,KAAQ,+BAA+B,CACrD,OAASC,UAAU,KAAQ,6BAA6B,CAAC,2FAEnDC,SAAQ,mUACZC,WAAW,CAAG,UAAM,CAClB,uBAAmD,MAAKC,KAAK,CAArDC,MAAM,CAAIC,IAAI,oBAAJA,IAAI,CAAEC,KAAK,oBAALA,KAAK,CAAEC,aAAa,oBAAbA,aAAa,CAC5C,GAAMC,YAAW,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,CAAC,EAAI,IAAI,CAAC,CACvED,YAAY,CAACE,OAAO,CAClB,SAAS,CACTJ,IAAI,CAACK,SAAS,8BAAKN,WAAW,GAAE,CAAEH,IAAI,CAAJA,IAAI,CAAEC,KAAK,CAALA,KAAK,CAAEC,aAAa,CAAbA,aAAc,CAAC,GAAE,CACjE,CACD,GAAQQ,SAAQ,CAAK,MAAKZ,KAAK,CAAvBY,QAAQ,CAChBA,QAAQ,CAACf,UAAU,EAAE,CAAC,CACtB,GAAQgB,QAAO,CAAK,MAAKb,KAAK,CAAtBa,OAAO,CACfA,OAAO,CAACC,IAAI,CAAC,UAAU,CAAC,CAC1B,CAAC,0DAED,iBAAS,CACP,gBAA6D,IAAI,CAACd,KAAK,iCAA/DC,MAAM,CAAIE,KAAK,qBAALA,KAAK,CAAEY,UAAU,qBAAVA,UAAU,CAAIF,OAAO,aAAPA,OAAO,CAAED,QAAQ,aAARA,QAAQ,CACxD,GAAMI,KAAI,CAAG,CAAC,CACd;AACA,mBACE,aAAK,cAAY,eAAe,CAAC,SAAS,CAAC,cAAc,wBACvD,KAAC,MAAM,IAAG,cACV,aAAK,SAAS,CAAC,UAAU,wBACvB,WAAI,cAAY,eAAe,UAC3BD,UAAU,CAAGC,IAAI,CAAG,oBAAoB,CAAG,YAAY,EACtD,cACL,oCACE,sBAAI,iBAEF,CAAC,GAAG,cACJ,aAAM,cAAY,sBAAsB,UAAEb,KAAK,EAAQ,GACpD,cACL,sBAAI,kBAEF,CAAC,GAAG,cACJ,aAAM,cAAY,yBAAyB,UAAEY,UAAU,EAAQ,GAC5D,GACD,cACN,eACE,IAAI,CAAC,QAAQ,CACb,cAAY,gBAAgB,CAC5B,OAAO,CAAG,kBAAM,CAChB;AACEH,QAAQ,CAAChB,KAAK,CAAC,CACbM,IAAI,CAAE,EAAE,CACRa,UAAU,CAAE,CAAC,CACbZ,KAAK,CAAE,CAAC,CACRC,aAAa,CAAE,EACjB,CAAC,CAAC,CAAC,CACHS,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC,CACnB,CAAG,UACJ,YAED,EAAS,cACT,eACE,cAAY,aAAa,CACzB,OAAO,CAAG,IAAI,CAACf,WAAa,UAC7B,SAED,EAAS,GACL,GACF,CAEV,CAAC,sBA9DoBN,SAAS,EAuEhC,GAAMwB,gBAAe,CAAG,QAAlBA,gBAAe,UAAMhB,OAAM,MAANA,MAAM,OAAQ,CACvCA,MAAM,CAANA,MACF,CAAC,EAAC,CAEF,cAAeP,QAAO,CAACuB,eAAe,CAAC,CAACnB,QAAQ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}